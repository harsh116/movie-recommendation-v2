(this.webpackJsonpmovie_front=this.webpackJsonpmovie_front||[]).push([[0],{12:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n(13),s=n.n(i),a=n(8),r=n(2),o=(n(21),n(3)),l=(n(22),n(23),n(24),"https://image.tmdb.org/t/p/w500"),d=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],j=n(1),u=function(e){e.searchTerm;var t=e.setSearchTerm,n=e.searchCount,c=e.setSearchCount;return Object(j.jsx)("header",{children:Object(j.jsx)("form",{id:"form",onSubmit:function(e){e.preventDefault(),console.log(e.target.children[0].value),t(e.target.children[0].value),c(n+1),e.target.children[0].value=""},children:Object(j.jsx)("input",{type:"text",placeholder:"Search",id:"search",class:"search"})})})},m=n(16),v=(n(26),function(e){var t=e.genre;return Object(j.jsx)("div",{onClick:function(){!function(e,n){var c=Object(m.a)(e);0==c.length?c.push(t.id):c.includes(t.id)?c.forEach((function(e,n){e==t.id&&c.splice(n,1)})):c.push(t.id),n(c)}(e.selectedGenre,e.setSelectedGenre)},className:"tag ".concat(function(){var t=e.genre.id;return e.selectedGenre.includes(t)}()?"highlight":""),id:t.id,children:t.name})});var h=function(e){var t=d.map((function(t){return Object(j.jsx)(v,{genre:t,selectedGenre:e.selectedGenre,setSelectedGenre:e.setSelectedGenre})}));return Object(j.jsxs)("div",{id:"tags",children:[t,Object(j.jsx)("div",{className:"tag highlight ".concat(0===e.selectedGenre.length?"none":""),id:"clear",onClick:function(){e.setSelectedGenre([])},children:"Clear x"})]})},b=(n(12),n(10)),O=n.n(b),g=n(11),f=n(14);function x(e){return p.apply(this,arguments)}function p(){return(p=Object(f.a)(O.a.mark((function e(t){var n,c,i,s,a,r,o=arguments;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},c=n.timeout,i=void 0===c?8e3:c,s=new AbortController,a=setTimeout((function(){return s.abort()}),i),e.next=6,fetch(t,Object(g.a)(Object(g.a)({},n),{},{signal:s.signal}));case 6:return r=e.sent,clearTimeout(a),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N=function(e){var t,n=e.poster_path,i=e.title,s=e.vote_average,a=e.overview,d=Object(c.useState)(null),u=Object(o.a)(d,2),m=u[0],v=u[1],h=Object(r.f)();return Object(j.jsxs)("div",{className:"movie",onClick:function(t){if(console.log(t.target.className),"overview"===t.target.className)return t.target.classList.add("clicked"),void v(t.target);h("/Similar/".concat(encodeURI(i)),{state:e})},onMouseLeave:function(){m&&m.classList.remove("clicked")},children:[Object(j.jsxs)("div",{class:"movie_img",children:[Object(j.jsx)("img",{src:"".concat(n?l+n:"http://via.placeholder.com/1080x1580"),alt:i}),Object(j.jsxs)("div",{className:"overview",children:[Object(j.jsx)("h3",{children:"Overview"}),a]})]}),Object(j.jsxs)("div",{className:"movie-info",children:[Object(j.jsx)("h3",{class:"pointTitle",children:i}),Object(j.jsx)("span",{className:(t=s,t>=8?"green":t>=5?"orange":"red"),children:s})]})]})};var S=function(e){var t=Object(c.useState)([]),n=Object(o.a)(t,2),i=n[0],s=n[1],a=Object(c.useState)(!0),r=Object(o.a)(a,2),l=r[0],d=r[1],u=Object(c.useState)(!0),m=Object(o.a)(u,2),v=m[0],h=m[1],b=Object(c.useState)("initial"),O=Object(o.a)(b,2),g=O[0],f=O[1],p=e.selectedGenre,S=e.searchTerm,M=e.page,y=e.setPageNumber,T=e.setIsHiddenNavigationPage,w=e.searchCount,H=e.isSimilar,C=e.selectedMovieID,I=e.selectedMovieIDTitle,P=e.isMainHidden,G=e.setIsMainHidden,D=Object(c.useRef)(!0),_=Object(c.useRef)(!0);Object(c.useEffect)((function(){D.current?D.current=!1:(k(p,"discover"),y(1),console.log("getMovies selectedGenre"))}),[p]),Object(c.useEffect)((function(){console.log("searchTerm change"),_.current?_.current=!1:(console.log("getMovies searchterm"),0===S.length?k(null,null,!1):k(S,"search"),y(1))}),[S,w]);var k=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"1";console.log("getmovies: ",e),!1===n?f("initial"):"discover"===t?f("discovered"):"search"===t&&f("searched"),G(!0),x("".concat("","/movieData"),{method:"POST",timeout:6e3,headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e,includeKey:n,type:t,page:c})}).then((function(e){return e.json()})).then((function(e){G(!1),console.log(e.results),h(!0),e.results=e.results.filter((function(e){return null!==e})),e.results&&e.results.length>0?(d(!0),T(!1),s(e.results)):(d(!1),T(!0),s(e.results))})).catch((function(e){G(!1),console.log("err: ",e),s([]),T(!0),h(!1)}))};Object(c.useEffect)((function(){console.log("page changed"),"initial"===g?k(null,null,!1,M):"discovered"===g?k(p,"discover",!0,M):"searched"===g&&k(S,"search",!0,M)}),[M]),Object(c.useEffect)((function(){console.log(H),console.log("getmovies initial"),!1===H?k(null,null,!1):(console.log("similar"),window.scroll({top:0,left:0,behavior:"smooth"}),k({selectedMovieID:C,selectedMovieIDTitle:I},"similar"))}),[]),Object(c.useEffect)((function(){!1!==H&&(window.scroll({top:0,left:0,behavior:"smooth"}),k({selectedMovieID:C,selectedMovieIDTitle:I},"similar"))}),[C]);var E=i.map((function(e){return Object(j.jsx)(N,{title:e.title,poster_path:e.poster_path,vote_average:e.vote_average,overview:e.overview,id:e.id})}));return Object(j.jsxs)("main",{className:"".concat(P?"none":""),id:"main",children:[E,Object(j.jsx)("h1",{className:"no-results ".concat(l?"none":""),children:"No Results Found"}),Object(j.jsxs)("h2",{className:"no-results ".concat(v?"none":""),children:[Object(j.jsx)("span",{className:"red large",children:"OOPS!"}),Object(j.jsx)("br",{}),"Something is Wrong"]})]})},M=(n(28),function(e){var t=e.pageNumber,n=e.setPageNumber,c=e.isHiddenNavigationPage;return Object(j.jsx)("div",{className:"navigatePagesSection ".concat(c?"none":""),children:Object(j.jsxs)("div",{className:"navigatePagesBox",children:[Object(j.jsx)("button",{className:"navigatePrev round",onClick:function(){t>1&&n(t-1)},children:"<"}),Object(j.jsx)("span",{className:"pageNumber",children:t+""}),Object(j.jsx)("button",{className:"navigateNext round",onClick:function(){t<500&&n(t+1)},children:">"})]})})}),y=(n(29),n(15)),T=n.n(y);var w=function(e){var t=e.visible,n=e.text,c=e.type,i=e.classes||"",s=e.color||"#fff",a=e.color;return Object(j.jsxs)("div",{className:"Spinner ".concat(i," ").concat(t?"flex":"none"),children:[Object(j.jsx)(T.a,{type:c,color:s,height:50,width:50,timeout:0}),Object(j.jsx)("span",{style:a?{color:s}:{},class:"Loading_Text",children:n})]})};n(50);var H=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],s=Object(c.useState)(""),a=Object(o.a)(s,2),r=a[0],l=a[1],d=Object(c.useState)(1),m=Object(o.a)(d,2),v=m[0],b=m[1],O=Object(c.useState)(0),g=Object(o.a)(O,2),f=g[0],x=g[1],p=Object(c.useState)(!0),N=Object(o.a)(p,2),y=N[0],T=N[1],H=Object(c.useState)(!1),C=Object(o.a)(H,2),I=C[0],P=C[1];return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(u,{setSearchCount:x,searchCount:f,searchTerm:r,setSearchTerm:l}),Object(j.jsx)(h,{selectedGenre:n,setSelectedGenre:i}),Object(j.jsx)(w,{visible:I,text:"Loading Movies",type:"TailSpin"}),Object(j.jsx)(S,{isMainHidden:I,setIsMainHidden:P,page:v,setPageNumber:b,selectedGenre:n,searchTerm:r,setIsHiddenNavigationPage:T,searchCount:f,isSimilar:!1,selectedMovieID:""}),Object(j.jsx)(M,{isHiddenNavigationPage:y,pageNumber:v,setPageNumber:b})]})},C=(n(51),function(e){var t,n=Object(r.e)().state,i=Object(r.f)(),s=n.poster_path,a=n.title,d=n.vote_average,u=n.overview,m=n.id,v=Object(c.useState)(1),h=Object(o.a)(v,2),b=h[0],O=h[1],g=Object(c.useState)(!0),f=Object(o.a)(g,2),x=(f[0],f[1]),p=Object(c.useState)(!0),N=Object(o.a)(p,2),M=N[0],y=N[1];return Object(j.jsxs)("div",{className:"Similar",children:[Object(j.jsx)("button",{onClick:function(){i("/")},className:"homebtn topLeft",children:"Home"}),Object(j.jsx)("div",{className:"mainMovieSection",children:Object(j.jsxs)("div",{className:"movie",children:[Object(j.jsxs)("div",{class:"movie_img",children:[Object(j.jsx)("img",{src:"".concat(s?l+s:"http://via.placeholder.com/1080x1580"),alt:a}),Object(j.jsxs)("div",{className:"overview",children:[Object(j.jsx)("h3",{children:"Overview"}),u]})]}),Object(j.jsxs)("div",{className:"movie-info",children:[Object(j.jsx)("h3",{children:a}),Object(j.jsx)("span",{className:(t=d,t>=8?"green":t>=5?"orange":"red"),children:d})]})]})}),Object(j.jsx)("div",{className:"movieHeadingSection",children:Object(j.jsx)("div",{className:"movieHeadingBox",children:Object(j.jsxs)("h3",{className:"movieHeading",children:["Movies Similar to "," ",Object(j.jsx)("span",{className:"highlightHeading",children:a})," "]})})}),Object(j.jsx)("div",{className:"spinnerSection",children:Object(j.jsx)(w,{visible:M,text:"Loading Movies",type:"TailSpin"})}),Object(j.jsx)(S,{isMainHidden:M,setIsMainHidden:y,page:b,setPageNumber:O,setIsHiddenNavigationPage:x,isSimilar:!0,selectedMovieID:m,selectedMovieIDTitle:a})]})}),I=Object(j.jsx)(a.a,{children:Object(j.jsxs)(r.c,{children:[Object(j.jsx)(r.a,{path:"/",element:Object(j.jsx)(H,{})}),Object(j.jsx)(r.a,{path:"/Similar/:name",element:Object(j.jsx)(C,{})})]})});s.a.render(I,document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.3dba117a.chunk.js.map